@model List<IzinTakipSistemi.Models.Izin>

<!DOCTYPE html>
<html>
<head>
    <title>İzin Listesi</title>
    <style>
        body {
            font-family: Arial;
            margin: 10px;
            background: white;
        }
        .header {
            margin-bottom: 20px;
        }
        h1 {
            color: black;
            margin: 0;
        }
        
        .btn {
            padding: 5px 10px;
            margin: 2px;
            border: 1px solid black;
            cursor: pointer;
        }
        .btn-primary { background: blue; color: white; }
        .btn-danger { background: red; color: white; }
        .btn-success { background: green; color: white; }
        .btn-warning { background: orange; color: black; }
        
        table {
            width: 100%;
            border: 2px solid black;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid black;
            padding: 5px;
        }
        th {
            background-color: gray;
        }
        .alert {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid black;
        }
        .alert-info {
            background-color: lightblue;
        }
        .durum-beklemede { color: orange; }
        .durum-onaylandi { color: green; }
        .durum-reddedildi { color: red; }
    </style>
</head>
<body>
    <div class="header">
        <h1>İzin Listesi</h1>
    </div>

    <div>
        <a href="/Izin/Ekle" class="btn btn-primary">Yeni İzin Ekle</a>
        
        @if (ViewBag.KalanIzinHakki != null)
        {
            <div class="alert alert-info" style="margin-top: 15px;">
                <strong>İzin Durumunuz:</strong><br>
                Kullanılan İzin: <strong>@ViewBag.ToplamKullanilanGun gün</strong><br>
                Kalan İzin Hakkı: <strong>@ViewBag.KalanIzinHakki gün</strong><br>
                <small style="color: #666;">* Sadece onaylanmış izinler hesaplanır, reddedilen izinler hak düşmez.</small>
            </div>
        }
    </div>

    @if (Model.Count > 0)
    {
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Çalışan</th>
                    <th>Departman</th>
                    <th>İzin Türü</th>
                    <th>Başlangıç</th>
                    <th>Bitiş</th>
                    <th>Gün</th>
                    <th>Durum</th>
                    <th>İşlem</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var izin in Model)
                {
                    <tr>
                        <td>@izin.Id</td>
                        <td>@izin.CalisanAdi</td>
                        <td>@izin.Departman</td>
                        <td>@izin.IzinTuru</td>
                        <td>@izin.BaslangicTarihi.ToString("dd.MM.yyyy")</td>
                        <td>@izin.BitisTarihi.ToString("dd.MM.yyyy")</td>
                        <td>@izin.ToplamGun</td>
                        <td class="@(izin.OnayDurumu == "Beklemede" ? "durum-beklemede" : izin.OnayDurumu == "Onaylandı" ? "durum-onaylandi" : "durum-reddedildi")">
                            @izin.OnayDurumu
                        </td>
                        <td>
                            @if (ViewBag.KullaniciTipi == "admin" && izin.OnayDurumu == "Beklemede")
                            {
                                <a href="/Izin/Onayla/@izin.Id" class="btn btn-success">Onayla</a>
                                <a href="/Izin/Reddet/@izin.Id" class="btn btn-danger">Reddet</a>
                            }
                            <a href="/Izin/Sil/@izin.Id" class="btn btn-danger" 
                               onclick="return confirm('Silmek istediğinizden emin misiniz?')">Sil</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-info">
            Henüz izin kaydı bulunmuyor. Yeni izin eklemek için "Yeni İzin Ekle" butonuna tıklayın.
        </div>
    }
</body>
</html> 